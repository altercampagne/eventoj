{% extends '_base.html.twig' %}

{% block title %}Mettre à jour de ton profil{% endblock %}

{% macro render_registration(registration, active) %}
    <div class="card mb-3">
        <div class="card-header{% if active %} bg-primary-subtle{% endif %}">
            <h3 class="card-title fs-4 m-0">{{ registration.event.name }}</h3>
        </div>
        <div class="card-body">
            <p class="card-text">
                <b>Arrivée</b> prévue le <b>{{ registration.firstStageRegistration.stage.date|format_date('full') }}</b> pour le {{ registration.firstStageRegistration.firstMeal|trans|lower }}.<br />
                <b>Départ</b> prévu le <b>{{ registration.lastStageRegistration.stage.date|format_date('full') }}</b> après le {{ registration.firstStageRegistration.firstMeal|trans|lower }}.
            </p>
            <p class="card-text">
                <b>Paiement</b> de <b>{{ registration.approvedPayment.amount|format_price }}</b> réglé le <b>{{ registration.approvedPayment.approvedAt|format_date('short') }}</b>.
            </p>
        </div>
    </div>
{% endmacro %}

{% block main %}
    <div class="container">
        <div class="row text-center mb-3">
            <h1 class="fw-bold text-uppercase text-primary">Tes participations</h1>
        </div>

        <h2 class="fw-bold text-uppercase text-secondary mb-3">Participations à venir</h2>
        {% for registration in coming_registrations %}
            {{ _self.render_registration(registration, true) }}
        {% else %}
            Tu n'es inscrit à aucun évènement pour le moment !
        {% endfor %}

        {% if past_registrations|length > 0 %}
            <h2 class="fw-bold text-uppercase text-secondary mb-3 mt-4">Participations passées</h2>
            {% for registration in past_registrations %}
                {{ _self.render_registration(registration, false) }}
            {% endfor %}
        {% endif %}
    </div>
{% endblock %}
