{% extends 'admin/_base.html.twig' %}

{% set title = 'Toutes les alternatives (' ~ pager.nbResults ~ ')' %}

{% block main %}
    <div class="d-flex justify-content-end">
        <a href="{{ path('admin_alternative_create') }}" class="btn btn-primary">
            Créer une nouvelle alternative
        </a>
    </div>

    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col">Nom</th>
                <th scope="col">Évènements</th>
                <th scope="col">Description</th>
                {% if is_granted(constant('App\\Admin\\Security\\Permission::DEBUG').value) %}
                    <th scope="col">Geocoding</th>
                {% endif %}
                <th scope="col">Image</th>
                <th scope="col">Date</th>
            </tr>
        </thead>
        <tbody>
            {% for alternative in pager %}
                <tr data-href="{{ path('admin_alternative_show', { slug: alternative.slug }) }}">
                    <td>{{ alternative.name }}</td>
                    <td>
                        {% for event in alternative.events %}
                            <span class="badge bg-secondary">{{ event.name }}</span>
                        {% endfor %}
                    </td>
                    <td>{{ alternative.description|striptags|u.truncate(100, '...', false) }}</td>
                    {% if is_granted(constant('App\\Admin\\Security\\Permission::DEBUG').value) %}
                        <td>
                            <twig:Admin:IconBoolean value="{{ alternative.address.geocoded }}" tooltipTrue="Adresse géocodée" tooltipFalse="Adresse non géocodée" />
                        </td>
                    {% endif %}
                    <td>
                        <twig:Admin:IconBoolean value="{{ alternative.picture is not null }}" tooltipTrue="Cette alternative a bien une illustration" tooltipFalse="Cette alternative n'a pas d'illustration !" />
                    </td>
                    <td>{{ alternative.createdAt|format_datetime }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <twig:Admin:Pagination pager="{{ pager }}" />
{% endblock %}
