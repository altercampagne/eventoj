{% extends 'admin/_base.html.twig' %}

{% set title = 'Tous les membres (' ~ pager.nbResults ~ ')' %}

{% block main %}
    <div class="alert alert-warning">
        Cette liste contient toutes les personnes adhÃ©rentes Ã  l'association Ã  l'instant T <b>ainsi que les personnes dans le tur-fu</b> ğŸ˜.<br />
        <u>Petit explication :</u> les adhÃ©sions Ã©tant valides du 1er mai au 31 avril de l'annÃ©e suivante, les personnes qui s'inscrivent <b>AVANT le 1er mai</b> Ã  un Ã©vÃ¨nement ayant lieu l'Ã©tÃ©-mÃªme auront une adhÃ©sion qui commence dans le futur.
    </div>

    <table class="table table-hover">
        <tr>
            <th scope="col">Nom complet</th>
            <th scope="col">ValiditÃ© de l'adhÃ©sion</th>
            <th scope="col">Date d'adhÃ©sion</th>
        </tr>
        {% for membership in pager %}
            <tr data-href="{{ path('admin_user_show', { id: membership.user is not null ? membership.user.id : membership.companion.user.id }) }}">
                <td>
                    {% if membership.companion is not null %}
                        <span class="badge bg-secondary">CompanionÂ·ne de {{ membership.companion.user.fullName }}</span>
                    {% endif %}
                    <b>{{ membership.person.fullName }}</b>
                    <span class="text-secondary">({{ membership.person.email }})</span>
                </td>
                <td>
                    du <b>{{ membership.startAt|format_date }}</b> au <b>{{ membership.endAt|format_date }}</b>
                    {% if membership.startAt > date() %}
                        <span class="badge bg-warning">Dans l'tur-fu !</span>
                    {% endif %}
                </td>
                <td>{{ membership.createdAt|format_datetime }}</td>
            </tr>
        {% endfor %}
    </table>

    <twig:Admin:Pagination pager="{{ pager }}" />
{% endblock %}
